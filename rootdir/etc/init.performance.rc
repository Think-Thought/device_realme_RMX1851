on boot
    # Disable performance profile by default
    setprop perf_profile 0

# Balanced
on property:perf_profile=0
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq 1708800
    write /sys/devices/system/cpu/cpu6/cpufreq/scaling_max_freq 2208000
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq 200000
    write /sys/devices/system/cpu/cpu6/cpufreq/scaling_min_freq 200000

    write /sys/module/cpu_boost/parameters/input_boost_freq "0:1209600"
    write /sys/module/cpu_boost/parameters/input_boost_ms 20

    write /sys/class/kgsl/kgsl-3d0/devfreq/min_freq 180000000
    write /sys/class/kgsl/kgsl-3d0/devfreq/max_freq 320000000
    write /sys/class/kgsl/kgsl-3d0/default_pwrlevel 4

    write /proc/sys/kernel/perf_cpu_time_max_percent 2
    write /proc/sys/kernel/sched_autogroup_enabled 1
    write /proc/sys/kernel/sched_child_runs_first 0
    write /proc/sys/kernel/sched_tunable_scaling 0
    write /proc/sys/kernel/sched_migration_cost_ns 5000000
    write /proc/sys/kernel/sched_nr_migrate 256
    write /proc/sys/kernel/sched_schedstats 0
    write /proc/sys/kernel/printk_devkmsg off

    write /dev/stune/background/schedtune.util.max.effective 0
    write /dev/stune/background/schedtune.util.min.effective 0
    write /dev/stune/background/schedtune.util.max 0
    write /dev/stune/background/schedtune.util.min 0
    write /dev/stune/background/schedtune.boost 0
    write /dev/stune/background/schedtune.prefer_idle 1
    write /dev/stune/foreground/schedtune.util.max.effective 1
    write /dev/stune/foreground/schedtune.util.min.effective 0
    write /dev/stune/foreground/schedtune.util.max 1
    write /dev/stune/foreground/schedtune.util.min 0
    write /dev/stune/foreground/schedtune.boost 0
    write /dev/stune/foreground/schedtune.prefer_idle 1
    write /dev/stune/top-app/schedtune.util.max.effective 0
    write /dev/stune/top-app/schedtune.util.min.effective 0
    write /dev/stune/top-app/schedtune.util.max 128
    write /dev/stune/top-app/schedtune.util.min 0
    write /dev/stune/top-app/schedtune.boost 0
    write /dev/stune/top-app/schedtune.prefer_idle 1
    write /dev/stune/schedtune.util.min 0
    write /dev/stune/schedtune.util.max 512
    write /dev/stune/schedtune.util.max.effective 512
    write /dev/stune/schedtune.util.min.effective 0
    write /dev/stune/schedtune.boost 0
    write /dev/stune/schedtune.prefer_idle 1

    write /proc/sys/kernel/sched_downmigrate "90"
    write /proc/sys/kernel/sched_upmigrate "96"

    write /proc/sys/kernel/sched_upmigrate "96"
    write /proc/sys/kernel/sched_downmigrate "90"

# Gaming
on property:perf_profile=1
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq 1708800
    write /sys/devices/system/cpu/cpu6/cpufreq/scaling_max_freq 2208000
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq 1708800
    write /sys/devices/system/cpu/cpu6/cpufreq/scaling_min_freq 2208000

    write /sys/module/cpu_boost/parameters/input_boost_freq "0:1209600"
    write /sys/module/cpu_boost/parameters/input_boost_ms 20

    write /sys/class/kgsl/kgsl-3d0/devfreq/min_freq 180000000
    write /sys/class/kgsl/kgsl-3d0/devfreq/max_freq 504000000
    write /sys/class/kgsl/kgsl-3d0/default_pwrlevel 2

    write /proc/sys/kernel/perf_cpu_time_max_percent 20
    write /proc/sys/kernel/sched_autogroup_enabled 0
    write /proc/sys/kernel/sched_child_runs_first 0
    write /proc/sys/kernel/sched_tunable_scaling 0
    write /proc/sys/kernel/sched_migration_cost_ns 5000000
    write /proc/sys/kernel/sched_nr_migrate 128
    write /proc/sys/kernel/sched_schedstats 0
    write /proc/sys/kernel/printk_devkmsg off

    write /dev/stune/background/schedtune.util.max 1
    write /dev/stune/background/schedtune.util.min 1
    write /dev/stune/background/schedtune.boost 1
    write /dev/stune/background/schedtune.prefer_idle 0
    write /dev/stune/foreground/schedtune.util.max.effective 1
    write /dev/stune/foreground/schedtune.util.min.effective 0
    write /dev/stune/foreground/schedtune.util.max 1024
    write /dev/stune/foreground/schedtune.util.min 0
    write /dev/stune/foreground/schedtune.boost 13
    write /dev/stune/foreground/schedtune.prefer_idle 0
    write /dev/stune/top-app/schedtune.util.max.effective 1024
    write /dev/stune/top-app/schedtune.util.min.effective 0
    write /dev/stune/top-app/schedtune.util.max 1024
    write /dev/stune/top-app/schedtune.util.min 0
    write /dev/stune/top-app/schedtune.boost 20
    write /dev/stune/top-app/schedtune.prefer_idle 0
    write /dev/stune/schedtune.util.min 1024
    write /dev/stune/schedtune.util.max 1024
    write /dev/stune/schedtune.util.max.effective 1024
    write /dev/stune/schedtune.util.min.effective 0
    write /dev/stune/schedtune.boost 2
    write /dev/stune/schedtune.prefer_idle 0

    write /proc/sys/kernel/sched_upmigrate "20"
    write /proc/sys/kernel/sched_downmigrate "10"

    write /proc/sys/kernel/sched_downmigrate "10"
    write /proc/sys/kernel/sched_upmigrate "20"
